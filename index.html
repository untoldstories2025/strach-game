<!DOCTYPE html>
<html>
<head>
<title>Scratch For Bubbu ðŸ’–</title>

<style>
body {
    margin: 0;
    min-height: 200vh;
    background: linear-gradient(135deg, #ff758c, #ffb199);
    font-family: 'Segoe UI', sans-serif;
    text-align: center;
    padding: 30px;
}

h1 {
    color: white;
    margin-bottom: 20px;
}

#cards {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    justify-content: center;
}

.card {
    position: relative;
    width: min(95vw, 420px);   
    height: 300px; 
    border-radius: 18px;
    overflow: hidden;
    background: white;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.hiddenContent {
    position: absolute;
    inset: 0;
    z-index: 1;
}

.hiddenContent img {
    width: 100%;
    height: 100%;
    object-fit: contain;  
    background: black;
}

.hiddenContent p {
    margin: 5px;
    font-weight: bold;
    color: #ff4d6d;
}

canvas {
    position: absolute;
    inset: 0;
    z-index: 2;
}

.hint {
    color: white;
    margin-bottom: 15px;
}

/* Confetti + hearts */
.particle {
    position: fixed;
    font-size: 18px;
    animation: fly 3s linear forwards;
    pointer-events: none;
}

@keyframes fly {
    from {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    to {
        transform: translateY(-300px) scale(1.5);
        opacity: 0;
    }
}
</style>
</head>

<body>

<h1>ðŸª™ Scratch It Bubbu ðŸª™</h1>
<div class="hint">Scratch each card to reveal your surprise ðŸ’–</div>

<div id="cards"></div>

<script>
const cardData = [
{
    img: "kp.jpeg",
    text: "Tu maro favorite human che â¤ï¸"
},
{
    img: "kp2.jpeg",
    text: "I will always love you forever the most ðŸ’ª"
},
{
    img: "kp3.jpeg",
    text: "I can never hate You ðŸ˜˜"
}
];

const container = document.getElementById("cards");

cardData.forEach((data, index) => {
    const card = document.createElement("div");
    card.className = "card";

    const hidden = document.createElement("div");
    hidden.className = "hiddenContent";
    hidden.innerHTML = `
        <img src="${data.img}">
        <p>${data.text}</p>
    `;

    const canvas = document.createElement("canvas");
    card.appendChild(hidden);
    card.appendChild(canvas);
    container.appendChild(card);

    setupScratch(canvas, card);
});

function setupScratch(canvas, card){
    const ctx = canvas.getContext("2d");
    canvas.width = card.offsetWidth;
    canvas.height = card.offsetHeight;

    ctx.fillStyle = "#b0b0b0";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.font = "18px Arial";
    ctx.fillStyle = "#555";
    ctx.fillText("Scratch Me ðŸ˜„", 70, canvas.height / 2);

    let scratching = false;
    let cleared = false;

    function getPos(e){
        const rect = canvas.getBoundingClientRect();
        if(e.touches){
            return {
                x: e.touches[0].clientX - rect.left,
                y: e.touches[0].clientY - rect.top
            };
        }
        return {
            x: e.clientX - rect.left,
            y: e.clientY - rect.top
        };
    }

    function scratch(e){
        if(!scratching) return;
        const pos = getPos(e);
        ctx.globalCompositeOperation = "destination-out";
        ctx.beginPath();
        ctx.arc(pos.x, pos.y, 18, 0, Math.PI * 2);
        ctx.fill();

        checkReveal();
    }

    function checkReveal(){
        if(cleared) return;

        const pixels = ctx.getImageData(0,0,canvas.width,canvas.height).data;
        let transparent = 0;
        for(let i=3;i<pixels.length;i+=4){
            if(pixels[i] === 0) transparent++;
        }

        const percent = transparent / (pixels.length / 4);
        if(percent > 0.45){
            cleared = true;
            canvas.style.display = "none";
            launchCelebration();
        }
    }

    // Mouse
    canvas.addEventListener("mousedown", ()=> scratching = true);
    canvas.addEventListener("mouseup", ()=> scratching = false);
    canvas.addEventListener("mousemove", scratch);

    // Touch
    canvas.addEventListener("touchstart", ()=> scratching = true);
    canvas.addEventListener("touchend", ()=> scratching = false);
    canvas.addEventListener("touchmove", scratch);
}

// Confetti + hearts burst
function launchCelebration(){
    for(let i=0;i<25;i++){
        const particle = document.createElement("div");
        particle.className = "particle";
        particle.innerHTML = Math.random() > 0.5 ? "ðŸŽ‰" : "â¤ï¸";
        particle.style.left = Math.random() * window.innerWidth + "px";
        particle.style.bottom = "0px";
        particle.style.fontSize = (16 + Math.random()*25) + "px";
        document.body.appendChild(particle);

        setTimeout(()=> particle.remove(), 3000);
    }
}
</script>

</body>
</html>



